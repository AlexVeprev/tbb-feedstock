{% set version = "2017_20161128" %}

package:
  name: tbb
  version: {{ version }}

source:
  fn: tbb{{ version }}oss_src.tgz
  url: https://www.threadingbuildingblocks.org/sites/default/files/software_releases/source/tbb{{ version }}oss_src.tgz
  sha256: c009166233c8ea0e34530a1c5f870b79314316d19e6876b37a7e7c854080a540

build:
  number: 0
  features:
    - vc9  # [win and py27]
    - vc10  # [win and py34]
    - vc14  # [win and py >= 35]

requirements:
  build:
    - toolchain
    - python  # [win]
    - cmake  # [win]

test:
  requires:
    - python 2.7.*  # [win and py27]
    - python 3.4.*  # [win and py34]
    - python 3.5.*  # [win and py35]

  commands:
    - test -f ${PREFIX}/include/tbb/tbb.h  # [unix]
    - test -f ${PREFIX}/lib/libtbb.so  # [linux]
    - test -f ${PREFIX}/lib/libtbb.dylib  # [osx]

about:
  home: http://www.threadingbuildingblocks.org
  license: Apache 2.0
  license_file: LICENSE
  summary: High level abstract threading library

extra:
  recipe-maintainers:
    - jschueller
